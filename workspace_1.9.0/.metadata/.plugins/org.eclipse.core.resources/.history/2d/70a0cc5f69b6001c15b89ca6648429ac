/*
 * HAL_Instructions.c
 *
 *  Created on: 5 abr. 2022
 *      Author: josec
 *
 *      Aqu√≠ van todas las funciones que hagan referencia al bajo nivel:
 *      - Enviar por el puerto serie
 *      - Recibir por el puerto serie
 *      - Establecer un temporizador para una instruccion
 */
#include "HAL_Instructions.h"

void S_SendInstruction(uint8_t instCode, uint8_t time) {
	//Creo el struct de instruccion
	MovementInstruction_t mov;
	I_CreateInstructionStruct(instCode, time, &mov);
	//Transformo la instruccion a una cadena
	char* s_mov;
	I_MovementInstruction_toString(&mov, &s_mov);
	//Reservo el puerto serie
	while(xSemaphoreTake(xSemaphoreSerialHandle, portMAX_DELAY))
	//Envio el struct por el puerto serie
	printf("Movimiento %s\n\r", s_mov);
}
